<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drawings</title>
    <link rel="icon" type="image/png" href="data:image/avif;base64,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">
    <!-- link-css -->
     <link rel="stylesheet" href="css/style1.css">
     <link rel="stylesheet" href="css/screen.css">
    <!-- link-js -->
     <script src="script/script1.js"></script>
    <!-- link-icon -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.2.4/fabric.min.js"></script>
    <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.6.0/uicons-bold-rounded/css/uicons-bold-rounded.css'>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=history" />
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
</head>
<body>
    <div class="content">
        <!-- 1 -->
            <div class="content1">
                <div class="content1-list">
                    <div class="filter"><button class="flex zo"><ion-icon name="filter-outline"></ion-icon></button></div>
                    <button class="back"><ion-icon name="caret-back-outline"></ion-icon></button>
                    <div class="window"></div>
                    <button class="back"><ion-icon name="caret-forward-outline"></ion-icon></button>
                    <div class="back-button">
                        <button class="zo" onclick="undo()"><ion-icon name="arrow-back-outline"></ion-icon></button>
                        <button class="zo" onclick="redo()"><ion-icon name="arrow-forward-outline"></ion-icon></button>
                        <button class="zo" id="resetCanvasBtn"><i class="fi fi-br-rotate-right"></i></button>
                    </div>
                </div>
                <div class="content1-div">
                    <div id="canvas-container" width="1201px" style="position: relative; height: max-content; display: flex ; justify-content: center;">
                        <canvas id="canvas" width="1200px" height="744px" style="border: solid 1px #ccc;max-width: 100%;"></canvas>
                        <div style="top: 50%; transform: translateX(-50%); position: absolute; left: -29px;">
                            <span style="position: absolute; transform: rotate(90deg);width: max-content;">745px</span>
                        </div>
                        <span style="position: absolute; bottom: -20px; margin: auto;">1201px</span>
                    </div>
                    
                </div>

                <!-- 1 -->
                <div class="history-div box" id="box1"><div id="shapesContainer"></div></div>

                <!-- 2 -->
                <div class="history-div box" id="box2" style="width: auto;"><div id="lockedItemsContainer"></div></div>

                <!-- 3 -->
                <div class="history-div box" id="box3">
                    <label for="textColor" class="Edit"><a>Edit</a><span>لون النص</span></label>
                    <input type="color" class="haden" id="textColor" value="#000000" onchange="changeTextColor()"/>
                    <label for="shapeColor" class="Edit"><a>Edit</a><span>لون الشكل</span></label>
                    <input type="color" class="haden" id="shapeColor" value="#ff0000" onchange="changeShapeColor()"/>
                    <label onclick="changeColor()" class="Edit"><a>Edit</a><span>لون الخلفية</span></label>
                    <g></g>
                    <label for="shapeOpacity" class="Edit"><a><input type="range" id="shapeOpacity" min="0" max="1" step="0.01" value="1" onchange="changeShapeOpacity()"/></a><span>شفافية الشكل</span></label>
                    <label onclick="changeOpacity()" class="Edit"><a>Edit</a><span>شفافية الخلفية</span></label>
                    <g></g>
                    <div class="Edit">
                        <select class="input" id="textAlign" onchange="changeTextAlignment()">
                            <option value="left">يسار</option>
                            <option value="center">منتصف</option>
                            <option value="right">يمين</option>
                        </select>
                        <span>محاذاة النص</span>
                    </div>
                    <label for="" class="Edit"><input class="input" type="number" id="textSize" value="20" min="10" max="100" onchange="changeTextSize()"/><span>حجم النص</span></label>
                    <g></g>
                    <label onclick="lock()" class="Edit"><a>Edit</a><span>اضافة قفل</span></label>
                    <label onclick="unlock()" class="Edit" style="display: none;"><a style="color: rgb(245, 63, 63);">Delete</a><span>الغاء قفل</span></label>
                </div>

                <!-- 4 -->
                <div class="history-div box" id="box4">
                    <label for="upload" class="Edit"><a>Add</a><span>اضف صورة</span></label>
                    <input type="file" class="haden" id="upload" accept="image/*" />
                    <label onclick="addText()" class="Edit"><a>Add</a><span>اضف نص</span></label>
                    <label onclick="addShadow()" for="" class="Edit"><a>Add</a><span>اضف ظل</span></label>
                    <g></g>
                    <label onclick="removeShadow()" for="" class="Edit"><a>Ok</a><span>ازالة الظل</span></label>
                </div>
                
                <!-- 5 -->
                <div class="history-div box" id="box5">
                    <label class="Edit" onclick="downloadAsPSD()"><a>Download</a><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/af/Adobe_Photoshop_CC_icon.svg/512px-Adobe_Photoshop_CC_icon.svg.png?20200616073617" alt=""></label>
                    <label class="Edit" onclick="downloadAsPremiere()"><a>Download</a><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/40/Adobe_Premiere_Pro_CC_icon.svg/2101px-Adobe_Premiere_Pro_CC_icon.svg.png" alt=""></label>
                    <label class="Edit" onclick="downloadAsImage()"><a>Download</a><img src="https://cdn-icons-png.flaticon.com/512/9205/9205302.png" alt=""></label>
                </div>

                <!-- 6 -->
                <div class="history-div box" id="acuonts">
                    <div class="Edit acuont-div"><a>تسجيل الدخول</a><div class="acuont"><span class="logen"><span></span></span></div></div>
                    <g></g>
                    <label class="Edit" id="enableAutoSave"><a>Ok</a><span>تفعيل الحفظ التلقائي</span></label>
                    <label class="Edit" id="disableAutoSave"><a style="color: rgb(243, 48, 48);">Cancel</a><span>الغاء الحفظ التلقائي</span></label>
                </div>
            </div>

        <!-- 2 -->
            <div class="content2">
                <button class="flex button1 zo" id="acuont"><span class="logen"><span></span></span></button>
                <button class="flex button1 zo" id="toggleBtn4" style="font-size: 24px;"><ion-icon name="add-outline"></ion-icon></button>
                <button class="flex button1 zo" onclick="duplicate()"><ion-icon name="copy-outline"></ion-icon></button>
                <button class="flex button1 zo" id="toggleBtn3"><ion-icon name="brush-outline"></ion-icon></button>
                <button class="flex button1 zo" id="toggleBtn1"><ion-icon name="shapes-outline"></ion-icon></button>
                <button class="flex button1 zo" id="toggleBtn5"><ion-icon name="download-outline"></ion-icon></button>
                <button class="flex button1 zo" id="toggleBtn2"><span class="material-symbols-outlined"> history </span></button>
                <button class="flex button1 zo" onclick="deleteObjects()"><ion-icon name="trash-outline"></ion-icon></button>
            </div>
    </div>


    <script>
        const canvas = new fabric.Canvas('canvas');
    let undoHistory = [];
    let redoHistory = [];

    // رفع الصورة
    // رفع الصورة
document.getElementById('upload').addEventListener('change', function (e) {
    const reader = new FileReader();
    reader.onload = function (event) {
        fabric.Image.fromURL(event.target.result, function (img) {
            canvas.clear();

            // إضافة الصورة بحجمها الأصلي
            canvas.add(img);
            canvas.centerObject(img);  // لضبط الصورة في منتصف الـ canvas
            img.setCoords();
        });
    };
    reader.readAsDataURL(e.target.files[0]);
});


// تمكين سحب وإفلات الصورة
const canvasContainer = document.getElementById('canvas-container');

// إضافة حدث السحب
canvasContainer.addEventListener('dragover', function (e) {
    e.preventDefault();  // منع التصرف الافتراضي للسحب (لا يسمح بإفلات الملفات)
});

canvasContainer.addEventListener('drop', function (e) {
    e.preventDefault();  // منع التصرف الافتراضي (مثل فتح الملف)

    const file = e.dataTransfer.files[0];  // الحصول على الملف الذي تم سحبه
    if (file && file.type.startsWith('image/')) {  // التحقق من أن الملف صورة
        const reader = new FileReader();
        reader.onload = function (event) {
            fabric.Image.fromURL(event.target.result, function (img) {
                canvas.clear();  // مسح الـ Canvas قبل إضافة الصورة

                // إضافة الصورة بحجمها الأصلي
                canvas.add(img);

                // وضع الصورة في منتصف الـ Canvas
                img.set({
                    left: (canvas.width - img.width) / 2,
                    top: (canvas.height - img.height) / 2
                });

                img.setCoords();  // تحديث الإحداثيات
                canvas.renderAll();  // إعادة رسم الـ Canvas
            });
        };
        reader.readAsDataURL(file);  // قراءة الملف كـ URL
    } else {
        alert("يرجى سحب صورة فقط.");
    }
});

    // أدوات التعديل
    function addText() {
        const text = new fabric.Textbox('نص جديد', {
            left: 50,
            top: 50,
            fontSize: 20,
            fill: '#000',
            textAlign: 'left'
        });
        canvas.add(text);
        saveState();
    }

    function changeColor() {
        const color = prompt('اختر لون الخلفية (مثال: red, #00ff00):', '#ffffff');
        canvas.setBackgroundColor(color, canvas.renderAll.bind(canvas));
        saveState();
    }

    function resize() {
        const activeObject = canvas.getActiveObject();
        if (activeObject) {
            const newWidth = parseInt(prompt("أدخل العرض الجديد:", activeObject.width)) || activeObject.width;
            const newHeight = parseInt(prompt("أدخل الارتفاع الجديد:", activeObject.height)) || activeObject.height;
            activeObject.scaleToWidth(newWidth);
            activeObject.scaleToHeight(newHeight);
            canvas.renderAll();
            saveState();
        } else {
            alert("اختر عنصراً لتغيير حجمه!");
        }
    }

    function changeOpacity() {
        const activeObject = canvas.getActiveObject();
        if (activeObject) {
            let opacity = parseFloat(prompt("أدخل نسبة الشفافية (0 إلى 1):", activeObject.opacity));
            if (isNaN(opacity) || opacity < 0 || opacity > 1) {
                alert("الرجاء إدخال قيمة صالحة بين 0 و 1.");
                return;
            }
            activeObject.set('opacity', opacity);
            canvas.renderAll();
            saveState();
        } else {
            alert("اختر عنصراً لتغيير شفافيته!");
        }
    }

    function addShadow() {
    const activeObject = canvas.getActiveObject();
    if (activeObject) {
        // طلب القيم من المستخدم
        const shadowColor = prompt('اختر لون الظل (مثال: rgba(0,0,0,0.5)):', 'rgba(0,0,0,0.5)');
        const shadowBlur = parseInt(prompt('أدخل سماكة الظل (الضبابية):', '10')) || 10;
        const shadowOffsetX = parseInt(prompt('أدخل اتجاه الظل في المحور X (المسافة الأفقية):', '5')) || 5;
        const shadowOffsetY = parseInt(prompt('أدخل اتجاه الظل في المحور Y (المسافة الرأسية):', '5')) || 5;

        // تعيين الظل باستخدام القيم المدخلة
        activeObject.set('shadow', {
            color: shadowColor,
            blur: shadowBlur,
            offsetX: shadowOffsetX,
            offsetY: shadowOffsetY
        });
        
        canvas.renderAll();
        saveState();
    } else {
        alert("اختر عنصراً لإضافة ظل له!");
    }
}

      // إزالة الظل
      function removeShadow() {
        const activeObject = canvas.getActiveObject();
        if (activeObject) {
            activeObject.set('shadow', null);
            canvas.renderAll();
            saveState();
        } else {
            alert("اختر عنصراً لإزالة الظل منه!");
        }
    }

    function duplicate() {
        const activeObject = canvas.getActiveObject();
        if (activeObject) {
            activeObject.clone(function (cloned) {
                cloned.set({ left: activeObject.left + 50, top: activeObject.top + 50 });
                canvas.add(cloned);
                saveState();
            });
        } else {
            alert("اختر عنصراً لنسخه!");
        }
    }

// إضافة دالة لإغلاق العنصر
function lock() {
const activeObject = canvas.getActiveObject();
if (activeObject) {
    // التحقق مما إذا كان العنصر مغلقًا بالفعل
    if (activeObject.selectable === false) {
        alert("العنصر مغلق بالفعل!");
    } else {
        const lockDate = new Date().toLocaleString();  // الحصول على التاريخ والوقت الحالي

        // قفل العنصر
        activeObject.set({
            lockMovementX: true,
            lockMovementY: true,
            lockRotation: true,
            lockScalingX: true,
            lockScalingY: true,
            selectable: false, // منع التحديد
            evented: false // منع التفاعل
        });

        // إضافة العنصر المغلق إلى الديف
        addLockedItemToHistory(activeObject, lockDate);

        canvas.renderAll();
        saveState();
    }
} else {
    alert("اختر عنصراً لقفله!");
}
}

// إضافة العنصر المغلق إلى التاريخ في الديف
function addLockedItemToHistory(object, lockDate) {
const lockedItemsContainer = document.getElementById('lockedItemsContainer');

// إنشاء div جديد لكل عنصر مغلق
const itemDiv = document.createElement('div');
itemDiv.classList.add('locked-item');

// إضافة التاريخ والاسم وزر إلغاء القفل
const itemText = document.createElement('span');
itemText.textContent = `عنصر مغلق في: ${lockDate}`;

const unlockButton = document.createElement('button');
unlockButton.innerHTML = '<ion-icon name="close-outline"></ion-icon>';
unlockButton.onclick = function () {
    unlockItem(object, itemDiv);  // إلغاء القفل عند الضغط
};

// إضافة الكلاسات
unlockButton.classList.add('flex', 'button1', 'zo');


itemDiv.appendChild(itemText);
itemDiv.appendChild(unlockButton);
lockedItemsContainer.appendChild(itemDiv);
}

// دالة لإلغاء قفل العنصر
function unlockItem(object, itemDiv) {
if (object) {
    object.set('lockMovementX', false);
    object.set('lockMovementY', false);
    object.set('lockRotation', false);
    object.set('lockScalingX', false);
    object.set('lockScalingY', false);
    object.set('selectable', true); // تمكين التحديد
    object.set('evented', true); // تمكين التفاعل
    canvas.renderAll();
    saveState();

    // إخفاء العنصر من التاريخ بعد إلغاء قفله
    itemDiv.style.display = 'none';
}
}

    function deleteObjects() {
        const activeObjects = canvas.getActiveObjects();
        if (activeObjects.length > 0) {
            activeObjects.forEach(object => canvas.remove(object));
            saveState();
        } else {
            alert("اختر العناصر التي تريد حذفها!");
        }
    }

    // حفظ الحالة الحالية
    function saveState() {
        undoHistory.push(canvas.toJSON());
        redoHistory = []; // عند حفظ حالة جديدة، يتم مسح ال Redo History
    }

    // تنزيل كصورة
    function downloadAsImage() {
        const dataURL = canvas.toDataURL({ format: 'png' });
        const link = document.createElement('a');
        link.href = dataURL;
        link.download = 'canvas-image.png';
        link.click();
    }

    // تنزيل كملف فوتوشوب (PSD)
    function downloadAsPSD() {
        alert('تنزيل كملف فوتوشوب يتطلب مكتبة خاصة لتحويل البيانات إلى PSD. يمكنك استخدام مكتبات مثل psd.js.');
    }

    // تنزيل كملف أدوبي بريمير
    function downloadAsPremiere() {
        alert('تنزيل كملف أدوبي بريمير يتطلب تنسيق XML مناسب. يمكنك استخدام مكتبات أو حلول برمجية لتصدير هذا النوع من الملفات.');
    }

    // العودة للتعديل السابق (Undo)
    function undo() {
        if (undoHistory.length > 0) {
            const lastState = undoHistory.pop();
            redoHistory.push(canvas.toJSON());
            canvas.loadFromJSON(lastState, function () {
                canvas.renderAll();
            });
        } else {
            alert("لا يمكن العودة للتعديل السابق!");
        }
    }

    // التحديث الجديد (Redo)
    function redo() {
        if (redoHistory.length > 0) {
            const nextState = redoHistory.pop();
            undoHistory.push(canvas.toJSON());
            canvas.loadFromJSON(nextState, function () {
                canvas.renderAll();
            });
        } else {
            alert("لا يوجد تحديث جديد!");
        }
    }

    // تغيير محاذاة النص
    function changeTextAlignment() {
        const alignment = document.getElementById('textAlign').value;
        const activeObject = canvas.getActiveObject();
        if (activeObject && activeObject.type === 'textbox') {
            activeObject.set('textAlign', alignment);
            canvas.renderAll();
            saveState();
        }
    }

    // تغيير حجم النص
    function changeTextSize() {
        const size = parseInt(document.getElementById('textSize').value) || 20;
        const activeObject = canvas.getActiveObject();
        if (activeObject && activeObject.type === 'textbox') {
            activeObject.set('fontSize', size);
            canvas.renderAll();
            saveState();
        }
    }

    // تغيير لون النص
    function changeTextColor() {
        const color = document.getElementById('textColor').value;
        const activeObject = canvas.getActiveObject();
        if (activeObject && activeObject.type === 'textbox') {
            activeObject.set('fill', color);
            canvas.renderAll();
            saveState();
        }
    }

    // تغيير لون الشكل
    function changeShapeColor() {
const color = document.getElementById('shapeColor').value;
const activeObject = canvas.getActiveObject();
if (activeObject) {
    if (activeObject.set) {
        activeObject.set('fill', color);  // تغيير اللون إذا كان الكائن يدعم ذلك
        if (activeObject.type === 'line') {
            activeObject.set('stroke', color);  // تغيير اللون للخطوط (stroke)
        }
        canvas.renderAll();
        saveState();
    }
} else {
    alert("اختر عنصراً لتغيير لونه!");
}
}


    // تغيير شفافية الشكل
    function changeShapeOpacity() {
        const opacity = parseFloat(document.getElementById('shapeOpacity').value);
        const activeObject = canvas.getActiveObject();
        if (activeObject) {
            activeObject.set('opacity', opacity);
            canvas.renderAll();
            saveState();
        }
    }

    // إنشاء الأشكال
    function initializeShapes() {
        const shapesContainer = document.getElementById('shapesContainer');
        const shapes = [
             new fabric.Circle({ radius: 15, fill: 'rgb(95 99 104)' }), // دائرة
    new fabric.Rect({ width: 30, height: 30, fill: 'rgb(95 99 104)' }), // مربع
    new fabric.Triangle({ width: 30, height: 30, fill: 'rgb(95 99 104)' }), // مثلث
    new fabric.Ellipse({ rx: 15, ry: 15, fill: 'rgb(95 99 104)' }), // بيضاوي
    new fabric.Polygon([{ x: 0, y: 0 }, { x: 30, y: 0 }, { x: 15, y: 30 }], { fill: 'rgb(95 99 104)' }), // مثلث مائل
    new fabric.Polygon([{ x: 0, y: 0 }, { x: 15, y: 0 }, { x: 7.5, y: 22.5 }], { fill: 'rgb(95 99 104)' }), // مثلث صغير
    new fabric.Polygon([{ x: 0, y: 0 }, { x: 22.5, y: 0 }, { x: 11.25, y: 11.25 }], { fill: 'rgb(95 99 104)' }), // مثلث مائل آخر
    new fabric.Line([0, 0, 30, 30], { stroke: 'rgb(95 99 104)' }), // خط
    new fabric.Polygon([{ x: 7.5, y: 7.5 }, { x: 30, y: 10 }, { x: 22.5, y: 30 }], { fill: 'rgb(95 99 104)' }), // مثلث مختلف
    new fabric.Rect({ width: 30, height: 30, fill: 'rgb(95 99 104)' }), // مستطيل
    new fabric.Circle({ radius: 15, fill: 'rgb(95 99 104)' }), // دائرة أخرى

    // الأشكال الجديدة:
    new fabric.Polygon([{ x: 15, y: 0 }, { x: 18, y: 7.5 }, { x: 30, y: 7.5 }, { x: 21, y: 12.5 }, { x: 24, y: 20 }, { x: 15, y: 15 }, { x: 6, y: 20 }, { x: 9, y: 12.5 }, { x: 0, y: 7.5 }, { x: 12, y: 7.5 }], { fill: 'rgb(95 99 104)' }), // نجم
    new fabric.Polygon([{ x: 10, y: 0 }, { x: 30, y: 15 }, { x: 15, y: 25 }, { x: 0, y: 15 }], { fill: 'rgb(95 99 104)' }), // شكل رباعي مائل
    new fabric.Polygon([{ x: 0, y: 0 }, { x: 10, y: 10 }, { x: 5, y: 20 }, { x: 0, y: 15 }], { fill: 'rgb(95 99 104)' }), // شبه منحرف
    new fabric.Polygon([{ x: 5, y: 0 }, { x: 25, y: 0 }, { x: 30, y: 20 }, { x: 0, y: 20 }], { fill: 'rgb(95 99 104)' }), // مستطيل مع زاوية حادة
    new fabric.Polygon([{ x: 0, y: 0 }, { x: 15, y: 0 }, { x: 20, y: 15 }, { x: 10, y: 20 }, { x: 0, y: 15 }], { fill: 'rgb(95 99 104)' }), // شكل خماسي
    new fabric.Polygon([{ x: 0, y: 0 }, { x: 5, y: 20 }, { x: 25, y: 20 }, { x: 30, y: 0 }], { fill: 'rgb(95 99 104)' }), // شكل مائل آخر
    new fabric.Polygon([{ x: 15, y: 0 }, { x: 18, y: 5 }, { x: 30, y: 5 }, { x: 20, y: 12 }, { x: 22, y: 20 }, { x: 15, y: 15 }], { fill: 'rgb(95 99 104)' }), // شكل متعدد الأضلاع
    new fabric.Rect({ width: 30, height: 15, fill: 'rgb(95 99 104)' }), // مستطيل صغير
    new fabric.Line([0, 0, 15, 30], { stroke: 'rgb(95 99 104)' }),
        ];

        shapes.forEach(shape => {
            const previewCanvas = document.createElement('canvas');
            previewCanvas.width = 30;
            previewCanvas.height = 30;
            previewCanvas.className = 'shape-preview';
            const previewCtx = new fabric.StaticCanvas(previewCanvas);
            previewCtx.add(shape);

            previewCanvas.addEventListener('click', () => {
                const clone = fabric.util.object.clone(shape);
                clone.set({ left: 100, top: 100 });
                canvas.add(clone);
                saveState();
            });

            shapesContainer.appendChild(previewCanvas);
        });
    }



    let isAutoSaveEnabled = false; // حالة الحفظ التلقائي

// تفعيل الحفظ التلقائي
document.getElementById('enableAutoSave').addEventListener('click', function () {
    isAutoSaveEnabled = true;
    localStorage.setItem('autoSaveEnabled', true);
    alert("تم تفعيل الحفظ التلقائي.");
    saveCanvasToLocalStorage();
});

// إلغاء الحفظ التلقائي
document.getElementById('disableAutoSave').addEventListener('click', function () {
    isAutoSaveEnabled = false;
    localStorage.removeItem('autoSaveEnabled');
    localStorage.removeItem('canvasData');
    alert("تم إلغاء الحفظ التلقائي. لن يتم حفظ أي تغييرات بعد الآن.");
});

// حفظ حالة الـ canvas إلى localStorage
function saveCanvasToLocalStorage() {
    if (isAutoSaveEnabled) {
        const canvasData = canvas.toJSON();
        localStorage.setItem('canvasData', JSON.stringify(canvasData));
    }
}

// استعادة حالة الـ canvas من localStorage
function loadCanvasFromLocalStorage() {
    const autoSaveStatus = localStorage.getItem('autoSaveEnabled');
    if (autoSaveStatus === 'true') {
        isAutoSaveEnabled = true;
        const canvasData = localStorage.getItem('canvasData');
        if (canvasData) {
            canvas.loadFromJSON(canvasData, function () {
                canvas.renderAll();
            });
        }
    }
}

// حفظ تلقائي عند تعديل أو قفل العناصر
canvas.on('object:modified', saveCanvasToLocalStorage);
canvas.on('object:added', saveCanvasToLocalStorage);
canvas.on('object:removed', saveCanvasToLocalStorage);

// تحقق من حالة قفل العناصر واحفظ
canvas.on('object:locked', saveCanvasToLocalStorage);
canvas.on('object:unlocked', saveCanvasToLocalStorage);

// تحميل حالة الـ canvas عند فتح الصفحة
window.addEventListener('load', loadCanvasFromLocalStorage);





        document.getElementById('resetCanvasBtn').addEventListener('click', function () {
        // عرض نافذة التأكيد
        const confirmation = confirm("هل أنت متأكد أنك تريد حذف جميع المحتويات؟");
        
        if (confirmation) {
            // إذا أكد المستخدم، يتم مسح الـ Canvas
            canvas.clear();
            saveState(); // حفظ حالة جديدة بعد الحذف
        } else {
            // إذا ألغى المستخدم، لا يتم فعل شيء
            alert("تم إلغاء عملية إعادة المحتوى.");
        }
    });

    // تهيئة الأشكال
    initializeShapes();
</script>
</body>
</html>
