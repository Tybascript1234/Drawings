<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drawings</title>
    <link rel="icon" type="image/png" href="https://www.desktop-documentaries.com/images/Splice-logo.png">
    <!-- link-css -->
     <link rel="stylesheet" href="css/style1.css">
     <link rel="stylesheet" href="css/screen.css">
    <!-- link-js -->
     <script src="script/script1.js"></script>
    <!-- link-icon -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.2.4/fabric.min.js"></script>
    <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.6.0/uicons-bold-rounded/css/uicons-bold-rounded.css'>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=history" />
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
</head>
<body>

    <div class="contruol" id="" style="display: none;">
        <div class="flex"><img src="image/Splice-logo.png" style="height: 20px;margin-right: 10px;" alt=""><span>Drawings</span></div>
        <div class="flex">
            <button title="ØªØµØºÙŠØ±" onclick="maximizeWindow('normal')"><img style="height: 18px;" src="image/cl.svg" alt=""></button>
            <button title="ØªÙ‚Ù„ÙŠÙ„" onclick="minimizeWindow()"><ion-icon name="remove-outline"></ion-icon></button>
            <div class="zoo">
                <button title="ØªÙƒØ¨ÙŠØ±" onclick="maximizeWindow()"><ion-icon name="stop-outline"></ion-icon></button>
                <div id="maximizeOptions" class="dropdown">
                    <a class="sos"><label onclick="maximizeWindow('top-half')"><img src="image/Splice-logo.png" alt=""></label><label onclick="maximizeWindow('bottom-half')" style="margin: 0;"><img src="image/Splice-logo.png" alt=""></label></a>
                    <a><label onclick="maximizeWindow('left-half')" style="padding: 27px;"><img src="image/Splice-logo.png" alt=""></label><label onclick="maximizeWindow('right-half')" style="margin: 0;padding: 27px;"><img src="image/Splice-logo.png" alt=""></label></a>
                    <a><label><img src="image/Splice-logo.png" alt=""></label><label><img src="image/Splice-logo.png" alt=""></label><label style="margin: 0;"><img src="image/Splice-logo.png" alt=""></label></a>
                    <a class="xxxx"><label onclick="maximizeWindow('top-left-quarter')"><img src="image/Splice-logo.png" alt=""></label><label onclick="maximizeWindow('top-right-quarter')"><img src="image/Splice-logo.png" alt=""></label><label onclick="maximizeWindow('bottom-left-quarter')" style="margin-bottom: 0;"><img src="image/Splice-logo.png" alt=""></label><label onclick="maximizeWindow('bottom-right-quarter')" style="margin-bottom: 0;"><img src="image/Splice-logo.png" alt=""></label></a>
                </div>
            </div>
            <button title="Ø§ØºÙ„Ø§Ù‚" id="a3" onclick="closeWindow()" style="font-size: 21px;"><ion-icon name="close-outline"></ion-icon></button>  
        </div>
    </div>

    <script>
        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
function closeWindow() {
    window.close();
}

// ØªØµØºÙŠØ± Ø§Ù„Ù†Ø§ÙØ°Ø© (Ø¥Ø±Ø³Ø§Ù„Ù‡Ø§ Ø¥Ù„Ù‰ Ø§Ù„Ø®Ù„ÙÙŠØ©)
function minimizeWindow() {
    window.blur(); // ÙŠØ¬Ø¹Ù„ Ø§Ù„Ù†Ø§ÙØ°Ø© ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©
}

// Ø¥Ø¸Ù‡Ø§Ø± Ø£Ùˆ Ø¥Ø®ÙØ§Ø¡ Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„ØªÙƒØ¨ÙŠØ±
function toggleMaximizeOptions() {
    const options = document.getElementById('maximizeOptions');
    options.style.display = options.style.display === 'block' ? '' : 'block';
}

// ØªÙ†ÙÙŠØ° Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ù…Ø­Ø¯Ø¯ Ù„ØªÙƒØ¨ÙŠØ± Ø§Ù„Ù†Ø§ÙØ°Ø©
function maximizeWindow(option) {
    const options = document.getElementById('maximizeOptions');
    options.style.display = ''; // Ø¥Ø®ÙØ§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±

    const width = screen.width;
    const height = screen.height;

    let left = 0;
    let top = 0;
    let newWidth = width;
    let newHeight = height;

    switch (option) {
        case 'fullscreen':
            left = 0;
            top = 0;
            newWidth = width;
            newHeight = height;
            break;
        case 'normal':
            newWidth = 800;
            newHeight = 600;
            left = (width - newWidth) / 2;
            top = (height - newHeight) / 2;
            break;
        case 'right-half':
            newWidth = width / 2;
            left = width / 2;
            top = 0;
            newHeight = height;
            break;
        case 'left-half':
            newWidth = width / 2;
            left = 0;
            top = 0;
            newHeight = height;
            break;
        case 'bottom-half':
            newHeight = height / 2;
            left = 0;
            top = height / 2;
            newWidth = width;
            break;
        case 'top-half':
            newHeight = height / 2;
            left = 0;
            top = 0;
            newWidth = width;
            break;
        case 'top-right-quarter':
            newWidth = width / 2;
            newHeight = height / 2;
            left = width / 2;
            top = 0;
            break;
        case 'bottom-right-quarter':
            newWidth = width / 2;
            newHeight = height / 2;
            left = width / 2;
            top = height / 2;
            break;
        case 'top-left-quarter':
            newWidth = width / 2;
            newHeight = height / 2;
            left = 0;
            top = 0;
            break;
        case 'bottom-left-quarter':
            newWidth = width / 2;
            newHeight = height / 2;
            left = 0;
            top = height / 2;
            break;
        default:
            console.error('Invalid maximize option');
            return;
    }

    // ØªØ­Ø±ÙŠÙƒ ÙˆØªØºÙŠÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø®ÙŠØ§Ø±
    window.moveTo(left, top);
    window.resizeTo(newWidth, newHeight);
}

    </script>

    <div class="contenter">
        <!-- 1 -->
            <div class="content1">
                <div class="content1-list">
                    <div class="filter"><button class="flex zo"><ion-icon name="filter-outline"></ion-icon></button></div>
                    <button class="back zo flex"><ion-icon name="caret-back-outline"></ion-icon></button>

                    <!-- window -->
                    <div class="window">
                        <div>
                            <div>
                                <div id="container1" class="content-wrapper"> <div class="Open_tap show-button" onclick="showContent(1)"> <a class="v"> <img src="image/1.png" alt=""> <span>Ù‚Øµ Ø®Ù„ÙÙŠØ© Ø§Ù„ØµÙˆØ±</span> </a> </div> <button class="flex zo close-button" onclick="closeDiv(1)"> <ion-icon name="close"></ion-icon> </button> </div>
                                <div id="container2" class="content-wrapper"> <div class="Open_tap show-button" onclick="showContent(2)"> <a class="v"> <img src="image/2.png" alt=""> <span>PDF ØªØ¹Ø¯ÙŠÙ„ Ù…Ù„Ù</span> </a> </div> <button class="flex zo close-button" onclick="closeDiv(2)"> <ion-icon name="close"></ion-icon> </button> </div>
                            </div>
                        </div>
                        <button class="window-add flex zo" id="showAkolBtn" title="New tab"><ion-icon name="add-outline"></ion-icon></button>
                    </div>

                    <button class="back zo flex"><ion-icon name="caret-forward-outline"></ion-icon></button>
                    <div class="back-button">
                        <div class="op">
                            <button class="flex dom" id="toggleBtn6"><ion-icon name="add-outline"></ion-icon><span>Ø¬Ø¯ÙŠØ¯</span></button>
                            <!-- 7 -->
                            <div class="history-div box" style="top: 47px;display: none;height: auto;right: 0;" id="box6">
                                <div class="Edit" style="justify-content: right;height: 38px;"><span>ğŸ‘‹ ÙƒÙŠÙ Ø­Ø§Ù„Ùƒ</span></div>
                                <g></g>
                                <div style="height: 38px;" class="Edit"><a>Ø§Ù†Ø´Ø¦</a><span>Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</span></div>
                                <div style="height: 38px;" class="Edit"><a>Ø§Ù„ØºØ§Ø¡</a><span>Ø§Ù„ØºØ§Ø¡ Ø§Ù„Ø¥Ø´ØªØ§Ø±Ùƒ</span></div>
                            </div>
                        </div>
                        
                        <button class="zo" onclick="undo()"><ion-icon name="arrow-back-outline"></ion-icon></button>
                        <button class="zo" onclick="redo()"><ion-icon name="arrow-forward-outline"></ion-icon></button>
                        <button class="zo" id="resetCanvasBtn"><i class="fi fi-br-rotate-right"></i></button>
                    </div>
                </div>
                <div class="content1-div">
                    <div class="content1-div-div"><div class="flex"><a class="so" style="margin-right: 10px;"></a><span>Ø¹Ø±Ø¶ Ø®Ø§Øµ Ù„ÙØªØ±Ø© Ù…Ø­Ø¯ÙˆØ¯Ø© Ø¬Ù…ÙŠØ¹ Ø§Ø¯ÙˆØ§Øª Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù…Ø¬Ø§Ù†ÙŠØ©</span></div></div>
                    <!-- ------------------- -->
                    <div id="canvas-container" width="1201px" style="position: relative; height: max-content; display: flex ; justify-content: center;">
                        <canvas id="canvas" width="1200px" height="720px" style="border: solid 1px #ccc;max-width: 100%;"></canvas>
                        <div style="top: 50%; transform: translateX(-50%); position: absolute; left: -29px;">
                            <span style="position: absolute; transform: rotate(90deg);width: max-content;">745px</span>
                        </div>
                        <span style="position: absolute; bottom: -20px; margin: auto;">1201px</span>
                    </div>

                    <!-- --------------------- -->
                    <div id="content1" class="content xxf"><div id="contentex1"></div></div>
                    <div id="content2" class="content xxf"><div id="contentex2"></div></div>
                    
                </div>

            </div>

        <!-- 2 -->
            <div class="content2">
                <div class="op">
                   <button class="flex button1 v zo" id="acuont"><span class="logen"><span></span></span></button> 
                    <!-- 6 -->
                    <div class="history-div box" style="top: 37px" id="acuonts">
                        <div class="Edit acuont-div"><a>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a><div class="acuont"><span class="logen"><span></span></span></div></div>
                        <g></g>
                        <div class="Edit"><a>Ø§Ø¯Ø¹Ù…Ù†Ø§</a><span>Ø§Ø¯Ø¹Ù…Ù†Ø§ Ù„Ù†Ø³ØªÙ…Ø±</span></div>
                        <div class="Edit"><a>Ù…Ø³Ø§Ù‡Ù…Ø©</a><span>Ø³Ø§Ù‡Ù… Ù…Ø¹Ù†Ø§</span></div>
                        <div class="Edit"><a>Ù…Ø±Ø§Ø³Ù„Ø©</a><span>ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù…</span></div>
                        <g></g>
                        <div class="Edit" id="enableAutoSave"><a>Ok</a><span>ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­ÙØ¸ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</span></div>
                        <div class="Edit" id="disableAutoSave"><a style="color: rgb(243, 48, 48);">Cancel</a><span>Ø§Ù„ØºØ§Ø¡ Ø§Ù„Ø­ÙØ¸ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</span></div>
                    </div>
                </div>

                <div class="op">
                    <button class="flex button1 v zo" id="toggleBtn4" style="font-size: 24px;"><ion-icon name="add-outline"></ion-icon></button>
                    <!-- 4 -->
                    <div class="history-div box" id="box4">
                        <label for="upload" class="Edit"><a>Add</a><span>Ø§Ø¶Ù ØµÙˆØ±Ø©</span></label>
                        <input type="file" class="haden" id="upload" accept="image/*" />
                        <div onclick="addText()" class="Edit"><a>Add</a><span>Ø§Ø¶Ù Ù†Øµ</span></div>
                        <div onclick="addShadow()" class="Edit"><a>Add</a><span>Ø§Ø¶Ù Ø¸Ù„</span></div>
                        <g></g>
                        <div onclick="removeShadow()" class="Edit"><a>Ok</a><span>Ø§Ø²Ø§Ù„Ø© Ø§Ù„Ø¸Ù„</span></div>
                    </div>
                </div>

                <button class="flex button1 v zo" onclick="duplicate()"><ion-icon name="copy-outline"></ion-icon></button>
                <div class="op">
                    <button class="flex button1 v zo" id="toggleBtn3"><ion-icon name="brush-outline"></ion-icon></button>
                    <!-- 3 -->
                    <div class="history-div box" id="box3">
                        <label for="textColor" class="Edit"><a>Edit</a><span>Ù„ÙˆÙ† Ø§Ù„Ù†Øµ</span></label>
                        <input type="color" class="haden" id="textColor" value="#000000" onchange="changeTextColor()"/>
                        <label for="shapeColor" class="Edit"><a>Edit</a><span>Ù„ÙˆÙ† Ø§Ù„Ø´ÙƒÙ„</span></label>
                        <input type="color" class="haden" id="shapeColor" value="#ff0000" onchange="changeShapeColor()"/>
                        <div onclick="changeColor()" class="Edit"><a>Edit</a><span>Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ©</span></div>
                        <g></g>
                        <label for="shapeOpacity" class="Edit"><a><input type="range" id="shapeOpacity" min="0" max="1" step="0.01" value="1" onchange="changeShapeOpacity()"/></a><span>Ø´ÙØ§ÙÙŠØ© Ø§Ù„Ø´ÙƒÙ„</span></label>
                        <div onclick="changeOpacity()" class="Edit"><a>Edit</a><span>Ø´ÙØ§ÙÙŠØ© Ø§Ù„Ø®Ù„ÙÙŠØ©</span></div>
                        <g></g>
                        <div class="Edit">
                            <select class="input" id="textAlign" onchange="changeTextAlignment()">
                                <option value="left">ÙŠØ³Ø§Ø±</option>
                                <option value="center">Ù…Ù†ØªØµÙ</option>
                                <option value="right">ÙŠÙ…ÙŠÙ†</option>
                            </select>
                            <span>Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ù†Øµ</span>
                        </div>
                        <div class="Edit"><input class="input" type="number" id="textSize" value="20" min="10" max="100" onchange="changeTextSize()"/><span>Ø­Ø¬Ù… Ø§Ù„Ù†Øµ</span></div>
                        <g></g>
                        <div onclick="lock()" class="Edit"><a>Edit</a><span>Ø§Ø¶Ø§ÙØ© Ù‚ÙÙ„</span></div>
                        <div onclick="unlock()" class="Edit" style="display: none;"><a style="color: rgb(245, 63, 63);">Delete</a><span>Ø§Ù„ØºØ§Ø¡ Ù‚ÙÙ„</span></div>
                    </div>
                </div>

                <div class="op">
                    <button class="flex button1 v zo" id="toggleBtn1"><ion-icon name="shapes-outline"></ion-icon></button>
                    <!-- 1 -->
                    <div class="history-div box" id="box1"><div id="shapesContainer"></div></div>
                </div>

                <div class="op">
                    <button class="flex button1 v zo" id="toggleBtn5"><ion-icon name="download-outline"></ion-icon></button>
                    <!-- 5 -->
                    <div class="history-div box" id="box5">
                        <div class="Edit" onclick="downloadAsImage()"><a>Download</a><img src="https://cdn-icons-png.flaticon.com/512/9205/9205302.png" alt=""></div>
                        <g></g>
                        <div class="Edit" onclick="downloadAsPSD()"><a>Download</a><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/af/Adobe_Photoshop_CC_icon.svg/512px-Adobe_Photoshop_CC_icon.svg.png?20200616073617" alt=""></div>
                        <div class="Edit" onclick="downloadAsPremiere()"><a>Download</a><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/40/Adobe_Premiere_Pro_CC_icon.svg/2101px-Adobe_Premiere_Pro_CC_icon.svg.png" alt=""></div>
                        <div class="Edit" onclick=""><a>Download</a><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/fb/Adobe_Illustrator_CC_icon.svg/1200px-Adobe_Illustrator_CC_icon.svg.png" alt=""></div>
                        <div class="Edit" onclick=""><a>Download</a><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/48/Adobe_InDesign_CC_icon.svg/1200px-Adobe_InDesign_CC_icon.svg.png" alt=""></div>
                        <div class="Edit" onclick=""><a>Download</a><img src="https://cdn-icons-png.flaticon.com/512/1014/1014296.png" alt=""></div>
                        <g></g>
                        <div class="Edit"><a>Download</a><img src="https://cdn-icons-png.flaticon.com/512/5968/5968775.png" alt=""></div>
                        <div class="Edit"><a>Download</a><img src="https://files.raycast.com/l1wnrfl0ui0xczjl1mk4qt28ow2t" alt=""></div>
                    </div>
                </div>

                <div class="op">
                    <button class="flex button1 v zo" id="toggleBtn2"><span class="material-symbols-outlined"> history </span></button>
                    <!-- 2 -->
                    <div class="history-div box" id="box2" style="width: auto;"><div id="lockedItemsContainer"></div></div>
                </div>

                <button class="flex button1 v zo" onclick="deleteObjects()"><ion-icon name="trash-outline"></ion-icon></button>
            </div>


    </div>

<!--     -->
    <!-- --------------------- -->
     <div id="akol-overlay">
     <div id="akol-popup" class="show">
        <div class="omly">
            <div class="v"><img src="image/Splice-logo.png" style="height: 25px; border-radius: 6px; margin-right: 10px;" alt=""><span>Drawings</span></div>
            <div>
                <div class="acuont flex zo"><span class="logen"><span></span></span></div>
                <button id="closeAkolBtn" class="flex button1 v zo"><ion-icon name="close-outline"></ion-icon></button>
            </div>
        </div>
        <!-- <h2>ØªØµÙØ­ Ø¥Ø¶Ø§ÙØ§ØªÙ†Ø§ Ø¨Ø¶ØºØ·Ø© Ø²Ø±</h2> -->
        <div class="toggle-button" style="margin: 16px;">
            <div class="Background">
                <div class="Background-div" style="background-image: url(image/download\ \(1\).png);"><span></span><img src="image/download (2).png" alt=""></div>
                <div class="show-div">
                  <img src="image/1.png" alt="">
                  <br>
                  <button onclick="toggleShowButton(1)">Open</button><span>Ù‚Øµ Ø®Ù„ÙÙŠØ© Ø§Ù„ØµÙˆØ±</span>
                  <span class="on"></span>
                </div>
            </div>
            
            <div class="Background">
                <div class="Background-div"><img src="https://www.almowaten.net/wp-content/uploads/2020/09/%D8%AA%D8%AD%D9%88%D9%8A%D9%84-%D8%B5%D9%88%D8%B1%D8%A9-%D8%A7%D9%84%D9%89-pdf.jpg" alt=""></div>
                <div class="show-div">
                  <img src="image/2.png" alt="">
                  <br>
                  <button onclick="toggleShowButton(2)">Open</button><span>PDF ØªØ¹Ø¯ÙŠÙ„ Ù…Ù„Ù</span>
                </div>
            </div>
          </div>          
     </div>
    </div>

    <script>
        const canvas = new fabric.Canvas('canvas');
    let undoHistory = [];
    let redoHistory = [];

    // Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©
    // Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©
document.getElementById('upload').addEventListener('change', function (e) {
    const reader = new FileReader();
    reader.onload = function (event) {
        fabric.Image.fromURL(event.target.result, function (img) {
            canvas.clear();

            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙˆØ±Ø© Ø¨Ø­Ø¬Ù…Ù‡Ø§ Ø§Ù„Ø£ØµÙ„ÙŠ
            canvas.add(img);
            canvas.centerObject(img);  // Ù„Ø¶Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© ÙÙŠ Ù…Ù†ØªØµÙ Ø§Ù„Ù€ canvas
            img.setCoords();
        });
    };
    reader.readAsDataURL(e.target.files[0]);
});


// ØªÙ…ÙƒÙŠÙ† Ø³Ø­Ø¨ ÙˆØ¥ÙÙ„Ø§Øª Ø§Ù„ØµÙˆØ±Ø©
const canvasContainer = document.getElementById('canvas-container');

// Ø¥Ø¶Ø§ÙØ© Ø­Ø¯Ø« Ø§Ù„Ø³Ø­Ø¨
canvasContainer.addEventListener('dragover', function (e) {
    e.preventDefault();  // Ù…Ù†Ø¹ Ø§Ù„ØªØµØ±Ù Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ù„Ø³Ø­Ø¨ (Ù„Ø§ ÙŠØ³Ù…Ø­ Ø¨Ø¥ÙÙ„Ø§Øª Ø§Ù„Ù…Ù„ÙØ§Øª)
});

canvasContainer.addEventListener('drop', function (e) {
    e.preventDefault();  // Ù…Ù†Ø¹ Ø§Ù„ØªØµØ±Ù Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ (Ù…Ø«Ù„ ÙØªØ­ Ø§Ù„Ù…Ù„Ù)

    const file = e.dataTransfer.files[0];  // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø°ÙŠ ØªÙ… Ø³Ø­Ø¨Ù‡
    if (file && file.type.startsWith('image/')) {  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ù…Ù„Ù ØµÙˆØ±Ø©
        const reader = new FileReader();
        reader.onload = function (event) {
            fabric.Image.fromURL(event.target.result, function (img) {
                canvas.clear();  // Ù…Ø³Ø­ Ø§Ù„Ù€ Canvas Ù‚Ø¨Ù„ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙˆØ±Ø©

                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙˆØ±Ø© Ø¨Ø­Ø¬Ù…Ù‡Ø§ Ø§Ù„Ø£ØµÙ„ÙŠ
                canvas.add(img);

                // ÙˆØ¶Ø¹ Ø§Ù„ØµÙˆØ±Ø© ÙÙŠ Ù…Ù†ØªØµÙ Ø§Ù„Ù€ Canvas
                img.set({
                    left: (canvas.width - img.width) / 2,
                    top: (canvas.height - img.height) / 2
                });

                img.setCoords();  // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª
                canvas.renderAll();  // Ø¥Ø¹Ø§Ø¯Ø© Ø±Ø³Ù… Ø§Ù„Ù€ Canvas
            });
        };
        reader.readAsDataURL(file);  // Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„Ù ÙƒÙ€ URL
    } else {
        alert("ÙŠØ±Ø¬Ù‰ Ø³Ø­Ø¨ ØµÙˆØ±Ø© ÙÙ‚Ø·.");
    }
});

    // Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
    function addText() {
        const text = new fabric.Textbox('Ù†Øµ Ø¬Ø¯ÙŠØ¯', {
            left: 50,
            top: 50,
            fontSize: 20,
            fill: '#000',
            textAlign: 'left'
        });
        canvas.add(text);
        saveState();
    }

    function changeColor() {
        const color = prompt('Ø§Ø®ØªØ± Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ© (Ù…Ø«Ø§Ù„: red, #00ff00):', '#ffffff');
        canvas.setBackgroundColor(color, canvas.renderAll.bind(canvas));
        saveState();
    }

    function resize() {
        const activeObject = canvas.getActiveObject();
        if (activeObject) {
            const newWidth = parseInt(prompt("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¬Ø¯ÙŠØ¯:", activeObject.width)) || activeObject.width;
            const newHeight = parseInt(prompt("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø¬Ø¯ÙŠØ¯:", activeObject.height)) || activeObject.height;
            activeObject.scaleToWidth(newWidth);
            activeObject.scaleToHeight(newHeight);
            canvas.renderAll();
            saveState();
        } else {
            alert("Ø§Ø®ØªØ± Ø¹Ù†ØµØ±Ø§Ù‹ Ù„ØªØºÙŠÙŠØ± Ø­Ø¬Ù…Ù‡!");
        }
    }

    function changeOpacity() {
        const activeObject = canvas.getActiveObject();
        if (activeObject) {
            let opacity = parseFloat(prompt("Ø£Ø¯Ø®Ù„ Ù†Ø³Ø¨Ø© Ø§Ù„Ø´ÙØ§ÙÙŠØ© (0 Ø¥Ù„Ù‰ 1):", activeObject.opacity));
            if (isNaN(opacity) || opacity < 0 || opacity > 1) {
                alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù‚ÙŠÙ…Ø© ØµØ§Ù„Ø­Ø© Ø¨ÙŠÙ† 0 Ùˆ 1.");
                return;
            }
            activeObject.set('opacity', opacity);
            canvas.renderAll();
            saveState();
        } else {
            alert("Ø§Ø®ØªØ± Ø¹Ù†ØµØ±Ø§Ù‹ Ù„ØªØºÙŠÙŠØ± Ø´ÙØ§ÙÙŠØªÙ‡!");
        }
    }

    function addShadow() {
    const activeObject = canvas.getActiveObject();
    if (activeObject) {
        // Ø·Ù„Ø¨ Ø§Ù„Ù‚ÙŠÙ… Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        const shadowColor = prompt('Ø§Ø®ØªØ± Ù„ÙˆÙ† Ø§Ù„Ø¸Ù„ (Ù…Ø«Ø§Ù„: rgba(0,0,0,0.5)):', 'rgba(0,0,0,0.5)');
        const shadowBlur = parseInt(prompt('Ø£Ø¯Ø®Ù„ Ø³Ù…Ø§ÙƒØ© Ø§Ù„Ø¸Ù„ (Ø§Ù„Ø¶Ø¨Ø§Ø¨ÙŠØ©):', '10')) || 10;
        const shadowOffsetX = parseInt(prompt('Ø£Ø¯Ø®Ù„ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø¸Ù„ ÙÙŠ Ø§Ù„Ù…Ø­ÙˆØ± X (Ø§Ù„Ù…Ø³Ø§ÙØ© Ø§Ù„Ø£ÙÙ‚ÙŠØ©):', '5')) || 5;
        const shadowOffsetY = parseInt(prompt('Ø£Ø¯Ø®Ù„ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø¸Ù„ ÙÙŠ Ø§Ù„Ù…Ø­ÙˆØ± Y (Ø§Ù„Ù…Ø³Ø§ÙØ© Ø§Ù„Ø±Ø£Ø³ÙŠØ©):', '5')) || 5;

        // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¸Ù„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ù…Ø¯Ø®Ù„Ø©
        activeObject.set('shadow', {
            color: shadowColor,
            blur: shadowBlur,
            offsetX: shadowOffsetX,
            offsetY: shadowOffsetY
        });
        
        canvas.renderAll();
        saveState();
    } else {
        alert("Ø§Ø®ØªØ± Ø¹Ù†ØµØ±Ø§Ù‹ Ù„Ø¥Ø¶Ø§ÙØ© Ø¸Ù„ Ù„Ù‡!");
    }
}

      // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¸Ù„
      function removeShadow() {
        const activeObject = canvas.getActiveObject();
        if (activeObject) {
            activeObject.set('shadow', null);
            canvas.renderAll();
            saveState();
        } else {
            alert("Ø§Ø®ØªØ± Ø¹Ù†ØµØ±Ø§Ù‹ Ù„Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¸Ù„ Ù…Ù†Ù‡!");
        }
    }

    function duplicate() {
        const activeObject = canvas.getActiveObject();
        if (activeObject) {
            activeObject.clone(function (cloned) {
                cloned.set({ left: activeObject.left + 50, top: activeObject.top + 50 });
                canvas.add(cloned);
                saveState();
            });
        } else {
            alert("Ø§Ø®ØªØ± Ø¹Ù†ØµØ±Ø§Ù‹ Ù„Ù†Ø³Ø®Ù‡!");
        }
    }

// Ø¥Ø¶Ø§ÙØ© Ø¯Ø§Ù„Ø© Ù„Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø¹Ù†ØµØ±
function lock() {
const activeObject = canvas.getActiveObject();
if (activeObject) {
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù…Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¹Ù†ØµØ± Ù…ØºÙ„Ù‚Ù‹Ø§ Ø¨Ø§Ù„ÙØ¹Ù„
    if (activeObject.selectable === false) {
        alert("Ø§Ù„Ø¹Ù†ØµØ± Ù…ØºÙ„Ù‚ Ø¨Ø§Ù„ÙØ¹Ù„!");
    } else {
        const lockDate = new Date().toLocaleString();  // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ

        // Ù‚ÙÙ„ Ø§Ù„Ø¹Ù†ØµØ±
        activeObject.set({
            lockMovementX: true,
            lockMovementY: true,
            lockRotation: true,
            lockScalingX: true,
            lockScalingY: true,
            selectable: false, // Ù…Ù†Ø¹ Ø§Ù„ØªØ­Ø¯ÙŠØ¯
            evented: false // Ù…Ù†Ø¹ Ø§Ù„ØªÙØ§Ø¹Ù„
        });

        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù…ØºÙ„Ù‚ Ø¥Ù„Ù‰ Ø§Ù„Ø¯ÙŠÙ
        addLockedItemToHistory(activeObject, lockDate);

        canvas.renderAll();
        saveState();
    }
} else {
    alert("Ø§Ø®ØªØ± Ø¹Ù†ØµØ±Ø§Ù‹ Ù„Ù‚ÙÙ„Ù‡!");
}
}

// Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù…ØºÙ„Ù‚ Ø¥Ù„Ù‰ Ø§Ù„ØªØ§Ø±ÙŠØ® ÙÙŠ Ø§Ù„Ø¯ÙŠÙ
function addLockedItemToHistory(object, lockDate) {
const lockedItemsContainer = document.getElementById('lockedItemsContainer');

// Ø¥Ù†Ø´Ø§Ø¡ div Ø¬Ø¯ÙŠØ¯ Ù„ÙƒÙ„ Ø¹Ù†ØµØ± Ù…ØºÙ„Ù‚
const itemDiv = document.createElement('div');
itemDiv.classList.add('locked-item');

// Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„Ø§Ø³Ù… ÙˆØ²Ø± Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù‚ÙÙ„
const itemText = document.createElement('span');
itemText.textContent = `Ø¹Ù†ØµØ± Ù…ØºÙ„Ù‚ ÙÙŠ: ${lockDate}`;

const unlockButton = document.createElement('button');
unlockButton.innerHTML = '<ion-icon name="close-outline"></ion-icon>';
unlockButton.onclick = function () {
    unlockItem(object, itemDiv);  // Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù‚ÙÙ„ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ·
};

// Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒÙ„Ø§Ø³Ø§Øª
unlockButton.classList.add('flex', 'button1', 'zo');


itemDiv.appendChild(itemText);
itemDiv.appendChild(unlockButton);
lockedItemsContainer.appendChild(itemDiv);
}

// Ø¯Ø§Ù„Ø© Ù„Ø¥Ù„ØºØ§Ø¡ Ù‚ÙÙ„ Ø§Ù„Ø¹Ù†ØµØ±
function unlockItem(object, itemDiv) {
if (object) {
    object.set('lockMovementX', false);
    object.set('lockMovementY', false);
    object.set('lockRotation', false);
    object.set('lockScalingX', false);
    object.set('lockScalingY', false);
    object.set('selectable', true); // ØªÙ…ÙƒÙŠÙ† Ø§Ù„ØªØ­Ø¯ÙŠØ¯
    object.set('evented', true); // ØªÙ…ÙƒÙŠÙ† Ø§Ù„ØªÙØ§Ø¹Ù„
    canvas.renderAll();
    saveState();

    // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¹Ù†ØµØ± Ù…Ù† Ø§Ù„ØªØ§Ø±ÙŠØ® Ø¨Ø¹Ø¯ Ø¥Ù„ØºØ§Ø¡ Ù‚ÙÙ„Ù‡
    itemDiv.style.display = 'none';
}
}

    function deleteObjects() {
        const activeObjects = canvas.getActiveObjects();
        if (activeObjects.length > 0) {
            activeObjects.forEach(object => canvas.remove(object));
            saveState();
        } else {
            alert("Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯ Ø­Ø°ÙÙ‡Ø§!");
        }
    }

    // Ø­ÙØ¸ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
    function saveState() {
        undoHistory.push(canvas.toJSON());
        redoHistory = []; // Ø¹Ù†Ø¯ Ø­ÙØ¸ Ø­Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©ØŒ ÙŠØªÙ… Ù…Ø³Ø­ Ø§Ù„ Redo History
    }

    // ØªÙ†Ø²ÙŠÙ„ ÙƒØµÙˆØ±Ø©
    function downloadAsImage() {
        const dataURL = canvas.toDataURL({ format: 'png' });
        const link = document.createElement('a');
        link.href = dataURL;
        link.download = 'canvas-image.png';
        link.click();
    }

    // ØªÙ†Ø²ÙŠÙ„ ÙƒÙ…Ù„Ù ÙÙˆØªÙˆØ´ÙˆØ¨ (PSD)
    function downloadAsPSD() {
        alert('ØªÙ†Ø²ÙŠÙ„ ÙƒÙ…Ù„Ù ÙÙˆØªÙˆØ´ÙˆØ¨ ÙŠØªØ·Ù„Ø¨ Ù…ÙƒØªØ¨Ø© Ø®Ø§ØµØ© Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ PSD. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…ÙƒØªØ¨Ø§Øª Ù…Ø«Ù„ psd.js.');
    }

    // ØªÙ†Ø²ÙŠÙ„ ÙƒÙ…Ù„Ù Ø£Ø¯ÙˆØ¨ÙŠ Ø¨Ø±ÙŠÙ…ÙŠØ±
    function downloadAsPremiere() {
        alert('ØªÙ†Ø²ÙŠÙ„ ÙƒÙ…Ù„Ù Ø£Ø¯ÙˆØ¨ÙŠ Ø¨Ø±ÙŠÙ…ÙŠØ± ÙŠØªØ·Ù„Ø¨ ØªÙ†Ø³ÙŠÙ‚ XML Ù…Ù†Ø§Ø³Ø¨. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…ÙƒØªØ¨Ø§Øª Ø£Ùˆ Ø­Ù„ÙˆÙ„ Ø¨Ø±Ù…Ø¬ÙŠØ© Ù„ØªØµØ¯ÙŠØ± Ù‡Ø°Ø§ Ø§Ù„Ù†ÙˆØ¹ Ù…Ù† Ø§Ù„Ù…Ù„ÙØ§Øª.');
    }

    // Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø³Ø§Ø¨Ù‚ (Undo)
    function undo() {
        if (undoHistory.length > 0) {
            const lastState = undoHistory.pop();
            redoHistory.push(canvas.toJSON());
            canvas.loadFromJSON(lastState, function () {
                canvas.renderAll();
            });
        } else {
            alert("Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø³Ø§Ø¨Ù‚!");
        }
    }

    // Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ø¯ÙŠØ¯ (Redo)
    function redo() {
        if (redoHistory.length > 0) {
            const nextState = redoHistory.pop();
            undoHistory.push(canvas.toJSON());
            canvas.loadFromJSON(nextState, function () {
                canvas.renderAll();
            });
        } else {
            alert("Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙŠØ¯!");
        }
    }

    // ØªØºÙŠÙŠØ± Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ù†Øµ
    function changeTextAlignment() {
        const alignment = document.getElementById('textAlign').value;
        const activeObject = canvas.getActiveObject();
        if (activeObject && activeObject.type === 'textbox') {
            activeObject.set('textAlign', alignment);
            canvas.renderAll();
            saveState();
        }
    }

    // ØªØºÙŠÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ù†Øµ
    function changeTextSize() {
        const size = parseInt(document.getElementById('textSize').value) || 20;
        const activeObject = canvas.getActiveObject();
        if (activeObject && activeObject.type === 'textbox') {
            activeObject.set('fontSize', size);
            canvas.renderAll();
            saveState();
        }
    }

    // ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ù†Øµ
    function changeTextColor() {
        const color = document.getElementById('textColor').value;
        const activeObject = canvas.getActiveObject();
        if (activeObject && activeObject.type === 'textbox') {
            activeObject.set('fill', color);
            canvas.renderAll();
            saveState();
        }
    }

    // ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ø´ÙƒÙ„
    function changeShapeColor() {
const color = document.getElementById('shapeColor').value;
const activeObject = canvas.getActiveObject();
if (activeObject) {
    if (activeObject.set) {
        activeObject.set('fill', color);  // ØªØºÙŠÙŠØ± Ø§Ù„Ù„ÙˆÙ† Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ÙƒØ§Ø¦Ù† ÙŠØ¯Ø¹Ù… Ø°Ù„Ùƒ
        if (activeObject.type === 'line') {
            activeObject.set('stroke', color);  // ØªØºÙŠÙŠØ± Ø§Ù„Ù„ÙˆÙ† Ù„Ù„Ø®Ø·ÙˆØ· (stroke)
        }
        canvas.renderAll();
        saveState();
    }
} else {
    alert("Ø§Ø®ØªØ± Ø¹Ù†ØµØ±Ø§Ù‹ Ù„ØªØºÙŠÙŠØ± Ù„ÙˆÙ†Ù‡!");
}
}


    // ØªØºÙŠÙŠØ± Ø´ÙØ§ÙÙŠØ© Ø§Ù„Ø´ÙƒÙ„
    function changeShapeOpacity() {
        const opacity = parseFloat(document.getElementById('shapeOpacity').value);
        const activeObject = canvas.getActiveObject();
        if (activeObject) {
            activeObject.set('opacity', opacity);
            canvas.renderAll();
            saveState();
        }
    }

    // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø£Ø´ÙƒØ§Ù„
    function initializeShapes() {
        const shapesContainer = document.getElementById('shapesContainer');
        const shapes = [
             new fabric.Circle({ radius: 15, fill: 'rgb(95 99 104)' }), // Ø¯Ø§Ø¦Ø±Ø©
    new fabric.Rect({ width: 30, height: 30, fill: 'rgb(95 99 104)' }), // Ù…Ø±Ø¨Ø¹
    new fabric.Triangle({ width: 30, height: 30, fill: 'rgb(95 99 104)' }), // Ù…Ø«Ù„Ø«
    new fabric.Ellipse({ rx: 15, ry: 15, fill: 'rgb(95 99 104)' }), // Ø¨ÙŠØ¶Ø§ÙˆÙŠ
    new fabric.Polygon([{ x: 0, y: 0 }, { x: 30, y: 0 }, { x: 15, y: 30 }], { fill: 'rgb(95 99 104)' }), // Ù…Ø«Ù„Ø« Ù…Ø§Ø¦Ù„
    new fabric.Polygon([{ x: 0, y: 0 }, { x: 15, y: 0 }, { x: 7.5, y: 22.5 }], { fill: 'rgb(95 99 104)' }), // Ù…Ø«Ù„Ø« ØµØºÙŠØ±
    new fabric.Polygon([{ x: 0, y: 0 }, { x: 22.5, y: 0 }, { x: 11.25, y: 11.25 }], { fill: 'rgb(95 99 104)' }), // Ù…Ø«Ù„Ø« Ù…Ø§Ø¦Ù„ Ø¢Ø®Ø±
    new fabric.Line([0, 0, 30, 30], { stroke: 'rgb(95 99 104)' }), // Ø®Ø·
    new fabric.Polygon([{ x: 7.5, y: 7.5 }, { x: 30, y: 10 }, { x: 22.5, y: 30 }], { fill: 'rgb(95 99 104)' }), // Ù…Ø«Ù„Ø« Ù…Ø®ØªÙ„Ù
    new fabric.Rect({ width: 30, height: 30, fill: 'rgb(95 99 104)' }), // Ù…Ø³ØªØ·ÙŠÙ„
    new fabric.Circle({ radius: 15, fill: 'rgb(95 99 104)' }), // Ø¯Ø§Ø¦Ø±Ø© Ø£Ø®Ø±Ù‰

    // Ø§Ù„Ø£Ø´ÙƒØ§Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:
    new fabric.Polygon([{ x: 15, y: 0 }, { x: 18, y: 7.5 }, { x: 30, y: 7.5 }, { x: 21, y: 12.5 }, { x: 24, y: 20 }, { x: 15, y: 15 }, { x: 6, y: 20 }, { x: 9, y: 12.5 }, { x: 0, y: 7.5 }, { x: 12, y: 7.5 }], { fill: 'rgb(95 99 104)' }), // Ù†Ø¬Ù…
    new fabric.Polygon([{ x: 10, y: 0 }, { x: 30, y: 15 }, { x: 15, y: 25 }, { x: 0, y: 15 }], { fill: 'rgb(95 99 104)' }), // Ø´ÙƒÙ„ Ø±Ø¨Ø§Ø¹ÙŠ Ù…Ø§Ø¦Ù„
    new fabric.Polygon([{ x: 0, y: 0 }, { x: 10, y: 10 }, { x: 5, y: 20 }, { x: 0, y: 15 }], { fill: 'rgb(95 99 104)' }), // Ø´Ø¨Ù‡ Ù…Ù†Ø­Ø±Ù
    new fabric.Polygon([{ x: 5, y: 0 }, { x: 25, y: 0 }, { x: 30, y: 20 }, { x: 0, y: 20 }], { fill: 'rgb(95 99 104)' }), // Ù…Ø³ØªØ·ÙŠÙ„ Ù…Ø¹ Ø²Ø§ÙˆÙŠØ© Ø­Ø§Ø¯Ø©
    new fabric.Polygon([{ x: 0, y: 0 }, { x: 15, y: 0 }, { x: 20, y: 15 }, { x: 10, y: 20 }, { x: 0, y: 15 }], { fill: 'rgb(95 99 104)' }), // Ø´ÙƒÙ„ Ø®Ù…Ø§Ø³ÙŠ
    new fabric.Polygon([{ x: 0, y: 0 }, { x: 5, y: 20 }, { x: 25, y: 20 }, { x: 30, y: 0 }], { fill: 'rgb(95 99 104)' }), // Ø´ÙƒÙ„ Ù…Ø§Ø¦Ù„ Ø¢Ø®Ø±
    new fabric.Polygon([{ x: 15, y: 0 }, { x: 18, y: 5 }, { x: 30, y: 5 }, { x: 20, y: 12 }, { x: 22, y: 20 }, { x: 15, y: 15 }], { fill: 'rgb(95 99 104)' }), // Ø´ÙƒÙ„ Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ø£Ø¶Ù„Ø§Ø¹
    new fabric.Rect({ width: 30, height: 15, fill: 'rgb(95 99 104)' }), // Ù…Ø³ØªØ·ÙŠÙ„ ØµØºÙŠØ±
    new fabric.Line([0, 0, 15, 30], { stroke: 'rgb(95 99 104)' }),
        ];

        shapes.forEach(shape => {
            const previewCanvas = document.createElement('canvas');
            previewCanvas.width = 30;
            previewCanvas.height = 30;
            previewCanvas.className = 'shape-preview';
            const previewCtx = new fabric.StaticCanvas(previewCanvas);
            previewCtx.add(shape);

            previewCanvas.addEventListener('click', () => {
                const clone = fabric.util.object.clone(shape);
                clone.set({ left: 100, top: 100 });
                canvas.add(clone);
                saveState();
            });

            shapesContainer.appendChild(previewCanvas);
        });
    }



    let isAutoSaveEnabled = false; // Ø­Ø§Ù„Ø© Ø§Ù„Ø­ÙØ¸ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ

// ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­ÙØ¸ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
document.getElementById('enableAutoSave').addEventListener('click', function () {
    isAutoSaveEnabled = true;
    localStorage.setItem('autoSaveEnabled', true);
    alert("ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­ÙØ¸ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ.");
    saveCanvasToLocalStorage();
});

// Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø­ÙØ¸ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
document.getElementById('disableAutoSave').addEventListener('click', function () {
    isAutoSaveEnabled = false;
    localStorage.removeItem('autoSaveEnabled');
    localStorage.removeItem('canvasData');
    alert("ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø­ÙØ¸ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ. Ù„Ù† ÙŠØªÙ… Ø­ÙØ¸ Ø£ÙŠ ØªØºÙŠÙŠØ±Ø§Øª Ø¨Ø¹Ø¯ Ø§Ù„Ø¢Ù†.");
});

// Ø­ÙØ¸ Ø­Ø§Ù„Ø© Ø§Ù„Ù€ canvas Ø¥Ù„Ù‰ localStorage
function saveCanvasToLocalStorage() {
    if (isAutoSaveEnabled) {
        const canvasData = canvas.toJSON();
        localStorage.setItem('canvasData', JSON.stringify(canvasData));
    }
}

// Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ù€ canvas Ù…Ù† localStorage
function loadCanvasFromLocalStorage() {
    const autoSaveStatus = localStorage.getItem('autoSaveEnabled');
    if (autoSaveStatus === 'true') {
        isAutoSaveEnabled = true;
        const canvasData = localStorage.getItem('canvasData');
        if (canvasData) {
            canvas.loadFromJSON(canvasData, function () {
                canvas.renderAll();
            });
        }
    }
}

// Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ ØªØ¹Ø¯ÙŠÙ„ Ø£Ùˆ Ù‚ÙÙ„ Ø§Ù„Ø¹Ù†Ø§ØµØ±
canvas.on('object:modified', saveCanvasToLocalStorage);
canvas.on('object:added', saveCanvasToLocalStorage);
canvas.on('object:removed', saveCanvasToLocalStorage);

// ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ù‚ÙÙ„ Ø§Ù„Ø¹Ù†Ø§ØµØ± ÙˆØ§Ø­ÙØ¸
canvas.on('object:locked', saveCanvasToLocalStorage);
canvas.on('object:unlocked', saveCanvasToLocalStorage);

// ØªØ­Ù…ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ù€ canvas Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
window.addEventListener('load', loadCanvasFromLocalStorage);





        document.getElementById('resetCanvasBtn').addEventListener('click', function () {
        // Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ£ÙƒÙŠØ¯
        const confirmation = confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§ØªØŸ");
        
        if (confirmation) {
            // Ø¥Ø°Ø§ Ø£ÙƒØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŒ ÙŠØªÙ… Ù…Ø³Ø­ Ø§Ù„Ù€ Canvas
            canvas.clear();
            saveState(); // Ø­ÙØ¸ Ø­Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø­Ø°Ù
        } else {
            // Ø¥Ø°Ø§ Ø£Ù„ØºÙ‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŒ Ù„Ø§ ÙŠØªÙ… ÙØ¹Ù„ Ø´ÙŠØ¡
            alert("ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰.");
        }
    });

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£Ø´ÙƒØ§Ù„
    initializeShapes();
</script>


<script>
 // Ø±ÙˆØ§Ø¨Ø· Ù…ØªØ¹Ø¯Ø¯Ø© Ù„Ø¹Ø±Ø¶Ù‡Ø§ ÙÙŠ Ø§Ù„Ù€ divs Ø§Ù„Ù…Ø®ØªÙ„ÙØ©
 const urls = [
      "image.html",  // Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø£ÙˆÙ„
      "pdf.html"                 // Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø«Ø§Ù†ÙŠ
    ];

    // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¶Ø§ÙØ© iframe Ø¯Ø§Ø®Ù„ div Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø§Ø¨Ø·
    function addIframeToDiv(divId, url) {
      const iframe = document.createElement("iframe");
      iframe.src = url;
      iframe.width = "100%";      // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¹Ø±Ø¶ Ø¥Ù„Ù‰ 100%
      iframe.height = "600px";    // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø§Ø±ØªÙØ§Ø¹
      iframe.frameBorder = "0";   // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¥Ø·Ø§Ø± Ø­ÙˆÙ„ Ø§Ù„Ù€ iframe

      // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù€ iframe Ø¥Ù„Ù‰ Ø§Ù„Ù€ div
      document.getElementById(divId).appendChild(iframe);
    }

    // Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©ØŒ Ù†Ù‚ÙˆÙ… Ø¨Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù€ iframe Ø¥Ù„Ù‰ ÙƒÙ„ div
    window.onload = function() {
      // Ø¥Ø¶Ø§ÙØ© iframe Ù„Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø£ÙˆÙ„
      addIframeToDiv("contentex1", urls[0]);

      // Ø¥Ø¶Ø§ÙØ© iframe Ù„Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø«Ø§Ù†ÙŠ
      addIframeToDiv("contentex2", urls[1]);
    };
</script>
</body>
</html>
